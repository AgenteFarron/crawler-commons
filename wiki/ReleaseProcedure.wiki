#summary Step-by-step guide to generating a release.

= Introduction =

This page describes how to do a release of crawler-commons. As we are using 
pure Maven, it is drop dead easy :0). So hold on to your hats, here we go!

= Details =

*Checkout a fresh version of the ENTIRE Crawler Commons SVN repository* 
It is pretty small < 1/2 GB and this saves time later on. The following command 
can be used-

svn checkout https://crawler-commons.googlecode.com/svn/ crawler-commons --username ${user.name}

You may also be promped for your password here.

*Non-core Documentation is Accurate*

  * % cd trunk

Please ensure that the details in CHANGES.txt are accurate and that 
licensing etc. is all accurate. 

*Generate Release Javadoc*

  * % gedit pom.xml
  * % change project version from X.Y-SNAPSHOT to X.Y
  * % mvn javadoc:javadoc
  * % cp -r target/site/apidocs/ ../wiki/javadoc/X.Y/ (X.Y should denote the release version. You may need to create the new destination directory)
  * % svn add ../wiki/docs/X.Y/
  * % svn revert pom.xml
  * % mvn clean
  
*Prepare the Release Artifacts (Dry-Run)*

  * % mvn release:clean release:prepare -DdryRun=true
  
Executing the above makes life a breeze for us. It 

  * % cleans out all previouus release-related module directories
  * % prepares us for a release, stating that this is a dryRun of the actual release. This gives us the oppertunity to review the artifacts.

At this stage is it imperative to check the resulting artifacts as we wish to iron out any discrepancies at this stage.

*Commit to SVN & Tag*

Before we commit the tag and set ourselves up for the next development drive, we want to commit the new Javadocs to Subversion. 

  * % cd ../ (you may wish to execute 'svn status' to ensure that all the files you wish are being committed)
  * % svn ci -m "X.Y Release Javadoc"
  * % cd trunk
  * % mvn release:clean release:prepare 

This will create and commit the release tag and bump the development version on. 
  
*Build & Deploy the pom, jar, javadoc, signatures and sources to the Sonatype staging repository*

  * % mvn:release:perform

*Close the Sonatype Staging Repository* 

  * % Browse to https://oss.sonatype.org/index.html and log in.
  * % Navigate to the Staging Repositories side tab and locate the stating release.
  * % Close the repository so that others can view and review it.
   
*Hold a Community VOTE*

  * % Head over to the Crawer Commons mailing list and create thread which details the tag and staging release.
  * % If all is good head back to the staging repository and Release the artifacts.

*Publicize*

Post to the crawler-commons list, as well as Nutch, Bixo, LinkedIn, Twitter etc.

*Additional Information*

It is common for developers unfamiliar with staging, snapshot and release repositories to encounter difficulties when attemtping to release artifacts. Much more information on the OSS Sonatype platform can be found below.

  * % https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide
